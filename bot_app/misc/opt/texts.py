import os
from typing import Union

from aiogram import types
from aiogram.utils.formatting import Text, as_list, TextLink, Bold, Code, Italic, as_numbered_list, Underline

from misc.bot import Contact

i_start = as_list(
    Text("ü§ñ"),
    Text("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!"),
    Text("–Ø –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–∞", TextLink(" –û—Ç–¥–µ–ª –ó–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤, –õ—É–±—è–Ω–∫–∞", url=os.getenv("CHANNEL_URL")), "."),
    Text("–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ", Bold("–û—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä"), " –∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º –¥–ª—è –í–∞—Å —Å–ø–æ—Å–æ–±–æ–º."))

a_start_dialog = as_list(
    Text("ü§ñ"),
    Text("–í—ã –Ω–∞—á–∞–ª–∏ –¥–∏–∞–ª–æ–≥ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –±–æ—Ç–∞"))

i_start_dialog = as_list(
    Text("üë©üèª‚Äçüíª"),
    Text("–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –∏ —è –æ—Ç–≤–µ—á—É –í–∞–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!"))

a_end_dialog = as_list(
    Text("ü§ñ"),
    Text("–í—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏ –¥–∏–∞–ª–æ–≥ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –±–æ—Ç–∞"))

i_share_contact = as_list(
    Text("ü§ñ"),
    Text("–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º:"))

a_wrong_type = as_list(
    Text("ü§ñ"),
    Text("–£–ø—Å—Å—Å... –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫...:(("),
    Text("–í–æ–∑–º–æ–∂–Ω–æ –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º —Ç–∏–ø–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"))


istaff_help = as_list(
    Text("–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞ –∏ —è –¥–æ–±–∞–≤–ª—é –¥–ª—è –Ω–µ–≥–æ –∫–Ω–æ–ø–∫—É —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π"),
    Text("–®–∞–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏:"),
    as_numbered_list(
        Text("–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ ", 
            TextLink("–∫–∞–Ω–∞–ª", url=os.getenv("CHANNEL_URL")), 
            " —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã"),
        Text("–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —ç—Ç–æ—Ç –ø–æ–¥—Ä–∞–∑–¥–µ–ª —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞"),
        Text("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–∞ –Ω–∞–∂–∞—Ç–∏–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É")
    )
)

istaff_success = Text("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")

istaff_post = as_list(
    Text("–í–∞—à –ø–æ—Å—Ç –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫ ‚§¥Ô∏è"),
    Text(" "),
    Text("–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞,"),
    Text("–ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ –µ–≥–æ –µ—â–µ —Ä–∞–∑")
)


def bi_start (ref: str) -> Text:
    return as_list(
        Text("ü§ñ"),
        Text("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!"),
        Text("–Ø –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª–∞", TextLink(" –û—Ç–¥–µ–ª –ó–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤, –õ—É–±—è–Ω–∫–∞", url=os.getenv("CHANNEL_URL")), "."),
        Text("–í—ã –æ—Å—Ç–∞–≤–∏–ª–∏ ‚ûï –ø–æ–¥ ", TextLink("–ø–æ—Å—Ç–æ–º", url=os.getenv("CHANNEL_URL") + f"/{ref}"), "."),
        Text(
            "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ", Bold("–û—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä"), " –∏ –º–µ–Ω–µ–¥–∂–µ—Ä –≤—ã—à–ª–µ—Ç –≤–∞–º –ø–æ–¥—Ä–æ–±–Ω—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –æ ",
            "–ñ–ö –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä, –∞ —Ç–∞–∫–∂–µ —É—Ç–æ—á–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤–∏—Ç—å ",
            "–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é –ø–æ–¥–±–æ—Ä–∫—É —Ç–æ—á–µ—á–Ω–æ –ø–æ–¥ –í–∞—à –∑–∞–ø—Ä–æ—Å."
            )
    )

def bi_phone_confirm(phone_number: str) -> Text:

    if phone_number == None:
        return as_list(
            Text("ü§ñ"),
            Text(f"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞"),
            Text("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:"),
            Text("8XXX-XXX-XX-XX")
        )        
    
    return as_list(
        Text("ü§ñ"),
        Text(f"–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞: {phone_number}"),
        Text("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:")
    )

def bi_contact_confirm(user_name: str, phone_number: str) -> Text:
    return as_list(
        Text("ü§ñ"),
        Text("–í–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:"),
        Text("üìû    ", phone_number),
        Text("‚òëÔ∏è    ", Code(user_name)),
        Text(" "),
		Text("–í—Å–∫–æ—Ä–µ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –í–∞–º–∏"),
        Italic("*–µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –≤–µ—Ä–Ω—ã, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é"), 
    )
	
def bi_2hotline(
        obj: Union[types.Message, types.CallbackQuery], 
        refs: Union[str, list, None], 
        contact: Union[Contact, None] = None) -> Text:

    if contact:
        if contact.full_name != obj.from_user.full_name:
            full_name = contact.full_name + " | " + obj.from_user.full_name

        else:
            full_name = obj.from_user.full_name

        msg_text = Text(
            f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @{obj.from_user.username}, ",
            f"–ø–æ–¥ –∏–º–µ–Ω–µ–º ", Underline(f"{full_name} "),
            f"–ø—Ä–æ—Å–∏—Ç —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∏–º –ø–æ –Ω–æ–º–µ—Ä—É ",
            f"{contact.phone_number}"
        )
        
    else:
        msg_text = Text(
            f"–û–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è @{obj.from_user.username}, ",
            f"–ø–æ–¥ –∏–º–µ–Ω–µ–º ", Underline(f"{obj.from_user.full_name}")
        )
        
    if refs:
        if isinstance(refs, str):
            refs = os.getenv("CHANNEL_URL") + f"/{refs}"

        elif isinstance(refs, list):
            refs = [os.getenv("CHANNEL_URL") + f"/{ref}" for ref in refs]

        msg_text = as_list(
            msg_text,
            as_list(
                "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –µ–≥–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–∏: ", 
                refs
            )
        )

    """
    —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –∑–∞–ø—Ä–æ—Å—É
    –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è 
    """

    return msg_text